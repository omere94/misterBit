var W=Object.defineProperty;var M=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var V=(t,e,s)=>e in t?W(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,D=(t,e)=>{for(var s in e||(e={}))K.call(e,s)&&V(t,s,e[s]);if(M)for(var s of M(e))Y.call(e,s)&&V(t,s,e[s]);return t};import{_,r as p,o as u,c as d,a as n,b as m,w as f,d as y,t as h,F as w,e as O,f as k,n as N,g as $,h as S,C as Q,S as X,P as Z,N as ee,i as g,v,j as F,k as te,l as G,m as oe,p as x,q as se,s as q,u as z,x as H,y as ne,z as re,A as ie,B as le,D as ae,E as ue}from"./vendor.bcdec157.js";const ce=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}};ce();var de="/assets/logo.679ca9a1.png";const pe={computed:{user(){return this.$store.getters.loggedinUser},checkUser(){return this.user?`Welcome ${this.user.username}!`:"Log-in / Sign-up!"}}},ye={class:"app-header main-layout"},me=n("img",{class:"logo",src:de},null,-1),he=y("Home"),ge=y("Dashboard"),_e=y("About");function fe(t,e,s,l,o,r){const i=p("router-link");return u(),d("header",ye,[me,n("nav",null,[m(i,{to:"/"},{default:f(()=>[he]),_:1}),m(i,{to:"/dashboard"},{default:f(()=>[ge]),_:1}),m(i,{to:"/about"},{default:f(()=>[_e]),_:1}),m(i,{to:"/login"},{default:f(()=>[y(h(r.checkUser),1)]),_:1})])])}var ve=_(pe,[["render",fe]]);const we={name:"App",created(){this.$store.dispatch({type:"loadToys"})},components:{appHeader:ve}};function ke(t,e,s,l,o,r){const i=p("app-header"),a=p("router-view");return u(),d(w,null,[m(i),m(a)],64)}var be=_(we,[["render",ke]]);const Te={},$e={class:"custom-card"};function Se(t,e){return u(),d("article",$e,[n("header",null,[O(t.$slots,"header")]),n("main",null,[O(t.$slots,"default")]),n("footer",null,[O(t.$slots,"footer")])])}var Ce=_(Te,[["render",Se]]),xe="/assets/out-of-stock.df75a1bb.png";const Ue={name:"toy-preview",props:{toy:Object},components:{customCard:Ce},methods:{goToDetail(){this.$router.push(`/details/${this.toy._id}`)},goToEdit(){this.$router.push(`/edit/${this.toy._id}`)},removeToy(t){this.$emit("removeToy",t)}},computed:{formatPrice(){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(this.toy.price)}}},Ee={key:0,class:"out-of-stock",src:xe},Le=["src"],Be={class:"categories"},Re=y("Categories: ");function Pe(t,e,s,l,o,r){const i=p("custom-card");return u(),k(i,null,{header:f(()=>[n("img",{class:N({nostock:!s.toy.inStock}),width:"100%",src:s.toy.url,alt:"No image"},null,10,Le),n("div",{class:N([{nostock:!s.toy.inStock},"information"])},[n("h2",null,h(s.toy.name),1),n("h2",null,h(r.formatPrice),1)],2)]),footer:f(()=>[n("button",{onClick:e[0]||(e[0]=(...a)=>r.goToDetail&&r.goToDetail(...a))},"Details"),n("button",{onClick:e[1]||(e[1]=(...a)=>r.goToEdit&&r.goToEdit(...a))},"Edit"),n("button",{onClick:e[2]||(e[2]=a=>r.removeToy(s.toy._id))},"Delete")]),default:f(()=>[s.toy.inStock?$("",!0):(u(),d("img",Ee)),n("div",Be,[n("p",null,[Re,(u(!0),d(w,null,S(s.toy.labels,a=>(u(),d("span",{key:a},h(a),1))),128))])])]),_:1})}var Oe=_(Ue,[["render",Pe]]);const Fe={name:"toy-list",props:{toys:{type:Array,required:!0}},data(){return{breakpoints:{400:{itemsToShow:2},700:{itemsToShow:3},900:{itemsToShow:4},1300:{itemsToShow:5}}}},components:{toyPreview:Oe,Carousel:Q,Slide:X,Pagination:Z,Navigation:ee},methods:{removeToy(t){this.$emit("removeToy",t)}},computed:{isLoading(){return this.$store.getters.isLoading}}},Ie={key:0},Me={key:1,class:"toy-list main-layout"};function Ve(t,e,s,l,o,r){const i=p("toy-preview"),a=p("slide"),c=p("Navigation"),E=p("Pagination"),R=p("carousel");return r.isLoading?(u(),d("p",Ie,"Loading...")):(u(),d("section",Me,[m(R,{breakpoints:o.breakpoints,"wrap-around":!0},{addons:f(()=>[m(c),m(E)]),default:f(()=>[(u(!0),d(w,null,S(s.toys,P=>(u(),k(a,{key:P._id},{default:f(()=>[m(i,{onRemoveToy:r.removeToy,toy:P},null,8,["onRemoveToy","toy"])]),_:2},1024))),128))]),_:1},8,["breakpoints"])]))}var De=_(Fe,[["render",Ve]]);const Ne={name:"toy-filter",data(){return{filterBy:{name:"",stock:"",labels:[],sortBy:""}}},methods:{setFilter(){this.$emit("setFilter",JSON.parse(JSON.stringify(this.filterBy)))}},computed:{labels(){return this.$store.getters.getLabels}}},Ae={class:"toy-filter"},Ge={class:"search"},qe={class:"stock-filter"},ze=y(" | All | "),He=y(" | On stock | "),je=y(" | Out of stock | "),Je=y(" | "),We=y(" Sort By: "),Ke=n("option",{value:"time"},"Time",-1),Ye=n("option",{value:"name"},"Name",-1),Qe=n("option",{value:"price"},"Price",-1),Xe=[Ke,Ye,Qe];function Ze(t,e,s,l,o,r){const i=p("el-option"),a=p("el-select");return u(),d("section",Ae,[n("div",Ge,[g(n("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>o.filterBy.name=c),onInput:e[1]||(e[1]=(...c)=>r.setFilter&&r.setFilter(...c)),type:"text",placeholder:"Search toy.."},null,544),[[v,o.filterBy.name]])]),n("div",qe,[n("label",null,[ze,g(n("input",{type:"radio",value:"","onUpdate:modelValue":e[2]||(e[2]=c=>o.filterBy.stock=c),onChange:e[3]||(e[3]=(...c)=>r.setFilter&&r.setFilter(...c))},null,544),[[F,o.filterBy.stock]])]),n("label",null,[He,g(n("input",{type:"radio",value:"true","onUpdate:modelValue":e[4]||(e[4]=c=>o.filterBy.stock=c),onChange:e[5]||(e[5]=(...c)=>r.setFilter&&r.setFilter(...c))},null,544),[[F,o.filterBy.stock]])]),n("label",null,[je,g(n("input",{type:"radio",value:"false","onUpdate:modelValue":e[6]||(e[6]=c=>o.filterBy.stock=c),onChange:e[7]||(e[7]=(...c)=>r.setFilter&&r.setFilter(...c))},null,544),[[F,o.filterBy.stock]])]),m(a,{style:{width:"150px"},placeholder:"Select category",onChange:r.setFilter,multiple:"",modelValue:o.filterBy.labels,"onUpdate:modelValue":e[8]||(e[8]=c=>o.filterBy.labels=c),"collapse-tags":"","collapse-tags-tooltip":""},{default:f(()=>[(u(!0),d(w,null,S(r.labels,c=>(u(),k(i,{key:c,label:c,value:c},null,8,["label","value"]))),128))]),_:1},8,["onChange","modelValue"]),Je]),n("label",null,[We,g(n("select",{onChange:e[9]||(e[9]=(...c)=>r.setFilter&&r.setFilter(...c)),"onUpdate:modelValue":e[10]||(e[10]=c=>o.filterBy.sortBy=c)},Xe,544),[[te,o.filterBy.sortBy]])])])}var et=_(Ne,[["render",Ze]]);const tt={name:"toy-app",data(){return{isChatOpen:!1}},methods:{removeToy(t){this.$store.dispatch({type:"removeToy",id:t})},setFilter(t){this.$store.dispatch({type:"filter",filterBy:t})}},computed:{toys(){return this.$store.getters.getToys}},components:{toyList:De,toyFilter:et}},ot={class:"toy-app"},st={class:"add-toy"},nt=y("Add Toy");function rt(t,e,s,l,o,r){const i=p("toy-filter"),a=p("toy-list"),c=p("router-link");return u(),d("section",ot,[m(i,{onSetFilter:r.setFilter},null,8,["onSetFilter"]),r.toys?(u(),k(a,{key:0,onRemoveToy:r.removeToy,toys:r.toys},null,8,["onRemoveToy","toys"])):$("",!0),n("span",st,[m(c,{to:"/edit"},{default:f(()=>[nt]),_:1})])])}var it=_(tt,[["render",rt]]);const lt="/api/";var at=G.create({withCredentials:!0});const b={get(t,e){return L(t,"GET",e)},post(t,e){return L(t,"POST",e)},put(t,e){return L(t,"PUT",e)},delete(t,e){return L(t,"DELETE",e)}};async function L(t,e="GET",s=null){try{return(await at({url:`${lt}${t}`,method:e,data:s,params:e==="GET"?s:null})).data}catch(l){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${t}, with data:`,s),console.dir(l),l.response&&l.response.status===401&&j.push("/login"),l}}G.defaults.withCredentials=!0;const C={query:ut,getById:ct,remove:dt,save:pt,getEmptyToy:yt};async function ut(t){return await b.get("toy",t)}async function ct(t){return await b.get(`toy/${t}`)}async function dt(t){return await b.delete(`toy/${t}`)}async function pt(t){return t._id?await b.put(`toy/${t._id}`,t):await b.post("toy",t)}function yt(){return{name:"",price:0,inStock:!0,labels:[],url:""}}const mt="",T=ht();function ht(){var t=null;return{async setup(){t=oe(mt)},on(s,l){t.on(s,l)},off(s,l=null){!t||(l?t.off(s,l):t.removeAllListeners(s))},emit(s,l){t.emit(s,l)},terminate(){t=null}}}const gt={name:"chat-room",props:{toy:{type:Object,required:!0}},data(){var t;return{msg:{from:((t=this.$store.getters.loggedinUser)==null?void 0:t.fullname)||"Guest",txt:""},msgs:[],topic:this.toy._id,userTyping:""}},created(){T.setup(),T.emit("chat topic",this.topic),T.on("chat addMsg",this.addMsg),T.on("chat test",this.setTyping)},unmounted(){T.off("chat addMsg",this.addMsg),T.off("chat test",this.isTyping)},methods:{addMsg(t){this.msgs.push(t)},setTyping(t){setTimeout(()=>{this.userTyping=null},2500),this.userTyping=t},sendMsg(){T.emit("chat newMsg",this.msg),this.msg.txt=""},typing(){T.emit("chat typing",this.msg.from)}},computed:{},components:{}},_t={class:"chat"},ft=n("button",null,"Send",-1),vt={key:0};function wt(t,e,s,l,o,r){return u(),d("section",_t,[n("ul",null,[(u(!0),d(w,null,S(o.msgs,(i,a)=>(u(),d("li",{key:a},[n("span",null,h(i.from)+":",1),y(" "+h(i.txt),1)]))),128))]),n("form",{onSubmit:e[2]||(e[2]=x((...i)=>r.sendMsg&&r.sendMsg(...i),["prevent"]))},[n("div",null,[g(n("input",{onInput:e[0]||(e[0]=(...i)=>r.typing&&r.typing(...i)),type:"text","onUpdate:modelValue":e[1]||(e[1]=i=>o.msg.txt=i),placeholder:"Type your message.."},null,544),[[v,o.msg.txt]]),ft]),o.userTyping?(u(),d("p",vt,h(o.userTyping)+" is typing..",1)):$("",!0)],32)])}var kt=_(gt,[["render",wt]]);const bt={name:"toy-details",data(){var t;return{toy:null,reviews:[],newReview:{userId:((t=this.$store.getters.loggedinUser)==null?void 0:t._id)||"",toyId:null,content:""},isChatOpen:!1}},async created(){const{id:t}=this.$route.params,e=await C.getById(t);this.toy=e,this.newReview.toyId=t,this.reviews=await this.$store.dispatch({type:"loadReviews",filterBy:{toyId:t}})},methods:{goBack(){this.$router.push("/")},async addReview(){await this.$store.dispatch({type:"addReview",review:this.newReview})}},computed:{formatDate(){return new Date(this.toy.createdAt).toDateString()},formatPrice(){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(this.toy.price)},reviews(){return this.$store.getters.reviews}},components:{chatRoom:kt}},Tt={key:0},$t=n("span",null,"SKU:",-1),St=n("p",null,[n("span",null,"Categories:")],-1),Ct=n("span",null,"PRICE:",-1),xt=n("span",null,"Placed on store at:",-1),Ut=n("h4",null,"Reviews:",-1),Et=n("button",null,"Save",-1);function Lt(t,e,s,l,o,r){const i=p("chat-room");return u(),d(w,null,[o.toy?(u(),d("section",Tt,[n("article",null,[n("h3",null,h(o.toy.name),1),n("p",null,[$t,y(" "+h(o.toy._id),1)]),St,(u(!0),d(w,null,S(o.toy.labels,a=>(u(),d("p",{key:a},h(a),1))),128)),n("p",null,[Ct,y(" "+h(r.formatPrice),1)]),n("p",null,[xt,y(" "+h(r.formatDate),1)]),Ut,n("ul",null,[(u(!0),d(w,null,S(r.reviews,a=>(u(),d("li",{key:a._id},[n("p",null,h(a.content),1)]))),128))]),n("form",{onSubmit:e[1]||(e[1]=x((...a)=>r.addReview&&r.addReview(...a),["prevent"]))},[g(n("input",{type:"text",placeholder:"Add new review!","onUpdate:modelValue":e[0]||(e[0]=a=>o.newReview.content=a)},null,512),[[v,o.newReview.content]]),Et],32)]),n("button",{onClick:e[2]||(e[2]=(...a)=>r.goBack&&r.goBack(...a))},"go back")])):$("",!0),o.isChatOpen?(u(),k(i,{key:1,toy:o.toy},null,8,["toy"])):$("",!0),n("div",{onClick:e[3]||(e[3]=a=>o.isChatOpen=!o.isChatOpen),class:"chat-widget"},"Chat")],64)}var Bt=_(bt,[["render",Lt]]);const Rt={name:"toy-edit",data(){return{toyToEdit:null}},async created(){const{id:t}=this.$route.params;if(t)try{const e=await C.getById(t);this.toyToEdit=e}catch(e){console.log(e)}else this.toyToEdit=C.getEmptyToy()},methods:{goBack(){this.$router.push("/")},async save(){try{await this.$store.dispatch({type:"saveToy",toy:this.toyToEdit}),this.$router.push("/")}catch(t){console.log(t)}}},computed:{labels(){return this.$store.getters.getLabels},formTitle(){const{id:t}=this.$route.params;return t?"Edit Toy":"Add a new toy!"}}},Pt={key:0,class:"toy-edit"},Ot=y(" Name of the toy? "),Ft=y(" Price of the toy? "),It=y(" On stock? "),Mt={class:"categories"},Vt=n("p",null,"Choose Categories:",-1),Dt=n("button",null,"Save",-1);function Nt(t,e,s,l,o,r){const i=p("el-checkbox");return o.toyToEdit?(u(),d("section",Pt,[n("h1",null,h(r.formTitle),1),n("form",{onSubmit:e[4]||(e[4]=x((...a)=>r.save&&r.save(...a),["prevent"]))},[n("label",null,[Ot,g(n("input",{type:"text",placeholder:"Write the name here","onUpdate:modelValue":e[0]||(e[0]=a=>o.toyToEdit.name=a)},null,512),[[v,o.toyToEdit.name]])]),n("label",null,[Ft,g(n("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=a=>o.toyToEdit.price=a),min:"0",max:"150"},null,512),[[v,o.toyToEdit.price]])]),n("label",null,[It,g(n("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=a=>o.toyToEdit.inStock=a)},null,512),[[se,o.toyToEdit.inStock]])]),n("div",Mt,[Vt,(u(!0),d(w,null,S(r.labels,a=>(u(),k(i,{key:a,label:a,modelValue:o.toyToEdit.labels,"onUpdate:modelValue":e[3]||(e[3]=c=>o.toyToEdit.labels=c),size:"medium",border:""},null,8,["label","modelValue"]))),128))]),Dt],32)])):$("",!0)}var At=_(Rt,[["render",Nt]]);const Gt={name:"App",data(){return{center:{lat:32.00094236242111,lng:34.73142477492578},markers:[{position:{lat:32.00094236242111,lng:34.73142477492578}},{position:{lat:32.02591861872609,lng:34.73909563991699}},{position:{lat:32.00787167143741,lng:34.73504682652268}}]}}};function qt(t,e,s,l,o,r){const i=p("GMapMarker"),a=p("GMapCluster"),c=p("GMapMap");return u(),k(c,{center:o.center,zoom:14,"map-type-id":"terrain",style:{width:"500px",height:"300px"}},{default:f(()=>[m(a,null,{default:f(()=>[(u(!0),d(w,null,S(o.markers,(E,R)=>(u(),k(i,{key:R,position:E.position,clickable:!0,draggable:!0,onClick:P=>o.center=E.position},null,8,["position","onClick"]))),128))]),_:1})]),_:1},8,["center"])}var zt=_(Gt,[["render",qt]]);q.register(...z);const Ht={components:{PieChart:H},data(){return{data:{labels:[],datasets:[{data:[],backgroundColor:["#0070d2","#e83e8c","#ffee00","#008827","#d50b22"]}]}}},created(){this.showPrices()},methods:{showPrices(){var t=this.$store.getters.getToys.reduce((e,s)=>(s.labels.forEach(l=>{e[l]?(e[l].total+=s.price,e[l].amount++):e[l]={total:s.price,amount:1}}),e),{});for(const e in t)this.data.labels.push(e),this.data.datasets[0].data.push(t[e].total/t[e].amount)}}},jt=n("h2",null,"By price",-1);function Jt(t,e,s,l,o,r){const i=p("PieChart");return u(),d("section",null,[jt,m(i,{chartData:o.data},null,8,["chartData"])])}var Wt=_(Ht,[["render",Jt]]);q.register(...z);const Kt={components:{PieChart:H},data(){return{data:{labels:[],datasets:[{data:[],backgroundColor:["#0070d2","#e83e8c","#ffee00","#008827","#d50b22"]}]}}},created(){this.showLabels()},methods:{showLabels(){const t=this.$store.getters.getToys;var e=t.reduce((l,o)=>(o.inStock||l++,l),0);this.data.labels.push("Out of stock"),this.data.datasets[0].data.push(e);var s=t.reduce((l,o)=>(o.inStock&&o.labels.forEach(r=>{l[r]?l[r]++:l[r]=1}),l),{});for(const l in s)this.data.labels.push(l),this.data.datasets[0].data.push(s[l])}}},Yt=n("h2",null,"By Stock",-1);function Qt(t,e,s,l,o,r){const i=p("PieChart");return u(),d("section",null,[Yt,m(i,{chartData:o.data},null,8,["chartData"])])}var Xt=_(Kt,[["render",Qt]]);const Zt={data(){return{}},computed:{toys(){return this.$store.getters.getToys}},components:{chartOne:Wt,chartTwo:Xt}},eo={class:"toy-dashboard"},to=n("h1",null,"Toys statistics",-1),oo={class:"charts"};function so(t,e,s,l,o,r){const i=p("chart-one"),a=p("chart-two");return u(),d("section",eo,[to,n("div",oo,[r.toys?(u(),k(i,{key:0})):$("",!0),r.toys?(u(),k(a,{key:1})):$("",!0)])])}var no=_(Zt,[["render",so]]);const ro={name:"Login Page",data(){return{loginCred:{username:"",password:""},signupCred:{username:"",password:"",fullname:""}}},methods:{async login(){try{await this.$store.dispatch({type:"login",userCred:this.loginCred}),this.$router.push("/")}catch(t){console.log(t)}},async logout(){try{await this.$store.dispatch("logout"),this.$router.push("/"),this.username=null,this.password=null}catch(t){console.log(t)}},async signup(){try{await this.$store.dispatch({type:"signup",userCred:this.signupCred}),this.$router.push("/")}catch(t){console.log(t)}}},created(){},computed:{loggedinUser(){return this.$store.getters.loggedinUser}},components:{}},io={class:"log-page"},lo=n("h1",null,"LOGIN/SIGNUP Page",-1),ao={key:0},uo=n("button",null,"Login",-1),co=n("hr",null,null,-1),po=n("h4",null,"Signup",-1),yo=n("button",null,"Signup Now!",-1);function mo(t,e,s,l,o,r){return u(),d("section",io,[lo,r.loggedinUser?(u(),d("section",ao,[n("h2",null,"Welcome "+h(r.loggedinUser.fullname),1),n("button",{onClick:e[0]||(e[0]=(...i)=>r.logout&&r.logout(...i))},"Logout")])):(u(),d("form",{key:1,onSubmit:e[3]||(e[3]=x((...i)=>r.login&&r.login(...i),["prevent"]))},[g(n("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=i=>o.loginCred.username=i),placeholder:"Enter username"},null,512),[[v,o.loginCred.username]]),g(n("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=i=>o.loginCred.password=i),placeholder:"Enter password"},null,512),[[v,o.loginCred.password]]),uo],32)),co,po,n("form",{onSubmit:e[7]||(e[7]=x((...i)=>r.signup&&r.signup(...i),["prevent"]))},[g(n("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=i=>o.signupCred.fullname=i),placeholder:"Enter full name"},null,512),[[v,o.signupCred.fullname]]),g(n("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=i=>o.signupCred.username=i),placeholder:"Enter username"},null,512),[[v,o.signupCred.username]]),g(n("input",{type:"password","onUpdate:modelValue":e[6]||(e[6]=i=>o.signupCred.password=i),placeholder:"Enter password"},null,512),[[v,o.signupCred.password]]),yo],32)])}var ho=_(ro,[["render",mo]]);const j=ne({history:re("/"),routes:[{path:"/",name:"App",component:it},{path:"/about",name:"about",component:zt},{path:"/dashboard",name:"toy-dashboard",component:no},{path:"/details/:id",name:"toy-details",component:Bt},{path:"/edit/:id?",name:"toy-edit",component:At},{path:"/login",component:ho}]});var go={state:{toys:null,labels:["On wheels","Box game","Art","Baby","Doll","Puzzle","Outdoor"],filterBy:null,isLoading:!1},getters:{getToys(t){return t.toys},getLabels(t){return t.labels},isLoading(t){return t.isLoading}},mutations:{setToys(t,{toys:e}){t.toys=e},setIsLoading(t,{isLoading:e}){t.isLoading=e},removeToy(t,{id:e}){const s=t.toys.findIndex(l=>l._id===e);t.toys.splice(s,1)},saveToy(t,{toy:e}){const s=t.toys.findIndex(l=>l._id===e._id);s!==-1?t.toys.splice(s,1,e):t.toys.push(e)},setFilter(t,{filterBy:e}){t.filterBy=e}},actions:{async loadToys({commit:t,state:e}){t({type:"setIsLoading",isLoading:!0});try{var s=await C.query(e.filterBy);t({type:"setToys",toys:s})}catch(l){throw console.error("Cannot Load toys",l),l}finally{t({type:"setIsLoading",isLoading:!1})}},async removeToy({commit:t},{id:e}){try{var e=await C.remove(e);t({type:"removeToy",id:e})}catch(s){throw console.error("Cannot remove toy",s),s}},async saveToy({commit:t},{toy:e}){try{var e=await C.save(e);t({type:"saveToy",toy:e})}catch(s){throw console.error("Cannot Edit/Add toy",s),s}},filter({commit:t,dispatch:e},{filterBy:s}){t({type:"setFilter",filterBy:s}),e({type:"loadToys"})}}};const I="loggedinUser",B={login:_o,signup:fo,logout:vo,getLoggedinUser:wo};async function _o(t){const e=await b.post("auth/login",t);if(e)return J(e)}async function fo(t){const e=await b.post("auth/signup",t);return J(e)}async function vo(){return sessionStorage.removeItem(I),await b.post("auth/logout")}function J(t){return sessionStorage.setItem(I,JSON.stringify(t)),t}function wo(){return JSON.parse(sessionStorage.getItem(I)||"null")}var ko={state:{loggedinUser:B.getLoggedinUser()},getters:{loggedinUser({loggedinUser:t}){return t}},mutations:{setLoggedinUser(t,{user:e}){t.loggedinUser=e?D({},e):null}},actions:{async login({commit:t},{userCred:e}){try{const s=await B.login(e);return t({type:"setLoggedinUser",user:s}),s}catch(s){console.log("cannot set user",s)}},async logout({commit:t}){try{await B.logout(),t({type:"setLoggedinUser",user:null})}catch(e){console.log("logout failed",e)}},async signup({commit:t},{userCred:e}){try{const s=await B.signup(e);t({type:"setLoggedinUser",user:s})}catch(s){console.log("signup failed",s)}}}};const A={add:To,query:bo};function bo(t){return b.get("review",t)}async function To(t){return await b.post("review",t)}const $o={state:{reviews:[]},getters:{reviews({reviews:t}){return t}},mutations:{setReviews(t,{reviews:e}){t.reviews=e},addReview(t,{review:e}){t.reviews.push(e)}},actions:{async addReview(t,{review:e}){try{return e=await A.add(e),t.commit({type:"addReview",review:e}),e}catch(s){throw console.log("reviewStore: Error in addReview",s),s}},async loadReviews({commit:t},{filterBy:e}){try{const s=await A.query(e);return t({type:"setReviews",reviews:s}),s}catch(s){throw console.log("reviewStore: Error in loadReviews",s),s}}}},So=ie({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{toyStore:go,userStore:ko,reviewStore:$o}});const U=le(be);U.use(ae,{load:{key:""}});U.use(j);U.use(So);U.use(ue);U.mount("#app");
